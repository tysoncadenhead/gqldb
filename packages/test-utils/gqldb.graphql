type Address @model(
    table: "mindful-ex-tyson"
    indexes: [{name: "ByState", index: "gsi1index", pk: "pk", sk: "gsi1"}]
) {
    pk: String! @pk(key: "Address")
    sk: String! @sk(key: "personId:{{personId}}|id:{{id}}")
    gsi1: String! @key(key: "state:{{state}}|city:{{city}}|id:{{id}}")
    id: ID! @generated
    personId: ID!
    street: String!
    city: String!
    state: String!
    zip: String!
    person: Person! @belongsTo(pk: "Person", sk: "id:{{personId}}")
}

type Email {
    domain: String
    address: String
}

type Person @model(table: "mindful-ex-tyson") {
    pk: String! @pk(key: "Person")
    sk: String! @sk(key: "id:{{id}}")
    id: ID! @generated
    firstName: String!
    lastName: String!
    age: Int
    addresses: [Address!]! @hasMany(pk: "Address", sk: "personId:{{id}}")
    emails: [Email]
}

type Validation @model(table: "mindful-ex-tyson") {
    pk: String! @pk(key: "Validation")
    sk: String! @sk(key: "id:{{id}}")
    id: ID! @generated
    minLength: String! @constraint(minLength: 3)
    maxLength: String! @constraint(maxLength: 3)
    min: Int! @constraint(min: 3)
    max: Int! @constraint(min: 3)
    pattern: String! @constraint(pattern: "[a-z]*")
    startsWith: String! @constraint(startsWith: "a")
    endsWith: String! @constraint(endsWith: "a")
    contains: String! @constraint(contains: "a")
    notContains: String! @constraint(notContains: "a")
}